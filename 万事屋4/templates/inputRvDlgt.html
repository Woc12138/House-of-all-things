<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>万事万物皆有所托</title>
    <link rel="shortcut icon" href="../static/bitbug_favicon%20.ico" type="image/x-icon" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../static/inputRvDlgtStyle.css" />

</head>
<body>
    <div class="cover-area"></div>
    <div class="box">
        <a href="oddJobsHouse.html"><img src="../static/back.png" class="back"></a>
        <p class="head">接受委托</p>
    </div>
    <div class="uoload-pic"><img src="../static/photoicon.png" class="photoicon"></div>
    <p class="p-name">委托名</p><br/>
    <input type="text" maxlength="10" class="content-head"><br/>
    <p class="p-detail">委托详情</p><br/>
    <!--<input type="text" maxlength="100" class="detales"><br/>-->
    <textarea class="text"></textarea>
    <span><p class="p-reward">报酬</p><input type="text" maxlength="20" class="reward"></span><br/>
    <span><p class="p-date">有效时间</p><input type="number" maxlength="15" class="deadline"><p id="dead-hour">h</p></span><br/>
    <span><p class="p-cont">联系方式</p><input type="text" maxlength="35" class="contact"></span><br/>
    <button class="button" id="publish">发布</button>


<script>
     $("#publish").click(function(){
         if($.trim($(".content-head").val())===''||$.trim($(".text").val())===''||$.trim($(".reward").val()).length<=0||$.trim($(".deadline").val()).length<=0||$.trim($(".contact").val()).length<=0)
         alert("不可为空");
         else {
             $.ajax({

                 type: "POST",
                 url: "http://101.132.140.85",
                 dataType: "json",
                 data: JSON.stringify({

                     "name": $(".content-head").val(),
                     "detail": $(".text").val(),
                     "reward": $(".reward").val(),
                     "date": $(".deadline").val(),
                     "contact": $(".contact").val(),
                     "user_id": localStorage.getItem('name')
                 }),
                 beforeSend: function (xhr) {
                     xhr.setRequestHeader("Content-Type", "application/json");
                 },
                 success: function () {
                     alert("发布委托成功")
                     window.location = "/templates/oddJobsHouse.html"

                }
            });
        }
})
</script>



</body>
</html>



























